# check-acl 1 "" Netspoc "User Manual"

# NAME

check-acl - Check if packets would pass given access list

# SYNOPSIS

check-acl [-f file] code/ROUTER ACL-NAME [PACKET-DESCRIPTION ...]

# DESCRIPTION

This command checks if given packets would be permitted or denied
by specified ACL.
ACL is read from code file that was generated by Netspoc for given router.
Packet descriptions are given on command line or read from file.
Each packet description is written to STDOUT,
prefixed with:

- `permit` if packet would be permitted
- `deny` if packet would be denied.

A packet description consists of 4 blank separated fields:

1. source IP address
2. destination IP address
3. protocol: `tcp` | `udp` | `icmp` | `proto`
4. port number | icmp-type/code | protcol number

# OPTIONS

**-f**, **--file**
:   Read packet descriptions from file.

**-h**, **--help**
:   Print a brief help message and exit.

# EXAMPLES

With this Netspoc configuration:

    ## START
    network:n1 = { ip = 10.1.1.0/24; }
    network:n2 = { ip = 10.1.2.0/24; }

    router:r1 = {
     managed;
     model = ASA;
     interface:n1 = { ip = 10.1.1.1; hardware = n1; }
     interface:n2 = { ip = 10.1.2.1; hardware = n2; }
    }

    service:s1 = {
     user = network:n1;
     permit src = user; dst = network:n2; prt = tcp 80-90, icmp 3/3;
    }
    ## END

and this file with packet descriptions:

    10.1.1.11 10.1.2.12 tcp 85
    10.1.1.11 10.0.0.0 udp 123
    10.1.1.11 10.1.2.12 icmp 3/3
    10.1.1.11 10.1.2.12 icmp 3/13

we would get this result:

`check-acl -f file code/r1 n1_in`

    permit 10.1.1.11 10.1.2.12 tcp 85
    deny   10.1.1.11 10.0.0.0 udp 123
    permit 10.1.1.11 10.1.2.12 icmp 3/3
    deny   10.1.1.11 10.1.2.12 icmp 3/13

# COPYRIGHT AND DISCLAIMER

(c) 2025 by Heinz Knutzen, heinz.knutzen@googlemail.com

http://hknutzen.github.com/Netspoc

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License along
with this program; if not, write to the Free Software Foundation, Inc.,
51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
